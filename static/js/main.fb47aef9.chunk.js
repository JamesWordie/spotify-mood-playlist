(this["webpackJsonpspotify-mood-playlist"]=this["webpackJsonpspotify-mood-playlist"]||[]).push([[0],{227:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(40),c=n.n(s),i=n(11),o=n(26),l=n(89),u=(n(100),n(2)),d=n(3),p=n(5),b=n(4),j=n(8),h=n(59),f=n(1),m=function(e){var t=function(e){var t=e.input,a=e.meta,r=e.label;return Object(f.jsxs)("div",{className:"search-bar",children:[Object(f.jsx)("input",Object(j.a)({placeholder:r,className:"form-control"},t)),n(a)]})},n=function(e){var t=e.error;if(e.touched&&t)return Object(f.jsx)("div",{className:"alert alert-danger mt-2",role:"alert",children:Object(f.jsx)("p",{className:"text-muted my-0",children:t})})};return Object(f.jsx)(h.b,{initialValues:e.initialValues,onSubmit:function(t){e.onSubmit(t)},validate:function(e){var t={};return e.search||(t.search="You need to make a search."),t},render:function(e){var n=e.handleSubmit;return Object(f.jsx)("form",{onSubmit:n,children:Object(f.jsx)(h.a,{name:"search",component:t,label:"Enter a search term..."})})}})},O=n(14),y=n.n(O),v=n(27),g=n(19),x=n.n(g),S=x.a.create({baseURL:"https://api.spotify.com/v1/me"}),k=x.a.create({baseURL:"https://api.spotify.com/v1/search",params:{type:"track",limit:"10"}}),N=x.a.create({baseURL:"https://api.spotify.com/v1/users/"}),w=x.a.create({baseURL:"https://api.spotify.com/v1/audio-features"}),T="SIGN_IN",C="SIGN_OUT",I="GET_DATA",D="SEARCH",A="SEARCH_TERM",_="SELECTED_SONG",E="CREATE_PLAYLIST",R="FETCH_ANALYSIS",L=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(n){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.get("",{headers:{Authorization:"Bearer "+e}});case 2:a=t.sent,r={id:a.data.id,profileURL:a.data.external_urls.spotify,username:a.data.display_name},n({type:I,payload:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.spotifySearchTerm(t),e.props.searchTerm(t)},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"row justify-content-center mt-3",children:Object(f.jsx)("div",{className:"col-12 col-sm-6",children:Object(f.jsx)(m,{onSubmit:this.onSubmit})})})}}]),n}(r.a.Component),B=Object(i.b)(null,{spotifySearchTerm:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(n,a){var r,s,c,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.spotifyToken,t.next=3,k.get("?q=".concat(e.search),{headers:{Authorization:"Bearer "+r}});case 3:s=t.sent,c=s.data.tracks.items,i=c.map((function(e){return{title:e.name,id:e.id,previewURL:e.preview_url,artist:e.album.artists[0].name,image:e.album.images[1].url,url:e.external_urls.spotify,albumTitle:e.album.name,uri:e.uri}})),n({type:D,payload:i});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},searchTerm:function(e){return{type:A,payload:e}}})(U),P=n(16),G=n(20),z=n(57),F=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onSignInClick=function(){e.logIn()},e.onSignOutClick=function(){e.props.signOut()},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e}),{}).access_token;e&&this.props.signIn(e)}},{key:"logIn",value:function(){var e=window.location.origin,t="http://localhost:3000"===e?e:e+"/",n=["user-read-private","playlist-modify-private","user-read-email","streaming","user-read-currently-playing","playlist-modify-public"].join("%20"),a="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("99c62832a2bb495889864467a498427d","&redirect_uri=").concat(t,"&scopes=").concat(n,"&").concat("response_type=token&show_dialog=true");window.open(a,"_self")}},{key:"renderAuthButton",value:function(){return this.props.isSignedIn?Object(f.jsxs)("button",{onClick:this.onSignOutClick,className:"btn btn-success",children:[Object(f.jsx)(P.a,{icon:z.a,style:{marginRight:"5px"}}),"Sign Out"]}):Object(f.jsxs)("button",{onClick:this.onSignInClick,className:"btn btn-success",children:[Object(f.jsx)(P.a,{icon:z.a,style:{marginRight:"5px"}}),"Sign In"]})}},{key:"renderProfile",value:function(){var e=this;if(this.props.userData)return Object(f.jsxs)("div",{className:"profile",onClick:function(){return window.open(e.props.userData.profileURL)},children:[Object(f.jsx)("div",{className:"icon",children:Object(f.jsx)(P.a,{icon:G.c,style:{fontSize:"20px",lineHeight:"40px"}})}),Object(f.jsx)("span",{children:this.props.userData.username})]})}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsxs)("span",{className:"d-inline-flex",children:[this.renderProfile(),this.renderAuthButton()]})})}}]),n}(r.a.Component),H=Object(i.b)((function(e){return{isSignedIn:e.auth.isSignedIn,userData:e.auth.userData,spotifyToken:e.auth.spotifyToken}}),{signIn:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(L(e));case 2:n({type:T,payload:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},signOut:function(){return{type:C}}})(F),M=function(){return Object(f.jsx)("div",{className:"navbar",children:Object(f.jsxs)("div",{className:"container-fluid",children:[Object(f.jsxs)("span",{className:"d-inline-flex logo",children:[Object(f.jsx)(P.a,{icon:G.a}),Object(f.jsx)("h3",{className:"first-title",children:"Tune"}),Object(f.jsx)("h3",{className:"second-title",children:"Sense"})]}),Object(f.jsx)(H,{})]})})},V=function(){return Object(f.jsx)("div",{className:"banner row",children:Object(f.jsxs)("div",{className:"col-6",children:[Object(f.jsxs)("span",{className:"d-inline-flex",children:[Object(f.jsx)(P.a,{icon:G.a}),Object(f.jsx)("h1",{className:"first-title",children:"Tune"}),Object(f.jsx)("h1",{className:"second-title",children:"Sense"})]}),Object(f.jsx)("p",{className:"text-light",children:"Search for a song based on your mood to generate a playlist"})]})})},Y=function(e){var t=e.song;return Object(f.jsxs)("div",{className:"card m-2 song-card",onClick:function(){return function(t){e.onSubmit(t)}(t)},children:[Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title",children:t.artist}),Object(f.jsx)("p",{className:"card-subtitle",children:t.title})]}),Object(f.jsx)("img",{src:t.image,alt:"album cover",className:"song-image"}),Object(f.jsx)("span",{className:"play",children:Object(f.jsx)(P.a,{icon:G.b})})]})},J=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.selectedSong(t)},e}return Object(d.a)(n,[{key:"renderSongs",value:function(){var e=this;return this.props.songs.map((function(t){return Object(f.jsx)(Y,{song:t,onSubmit:e.onSubmit},t.id)}))}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"col-xl-9 col-lg-6 col-md-12",children:Object(f.jsx)("div",{className:"d-flex flex-wrap justify-content-center mt-4",children:this.renderSongs()})})}}]),n}(r.a.Component),X=Object(i.b)((function(e){return{songs:e.search.songs}}),{selectedSong:function(e){return{type:_,payload:e}}})(J),q=n(92),W=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onClick=function(){e.props.fetchAnalysis(e.props.selectedSong.id)},e}return Object(d.a)(n,[{key:"renderData",value:function(){var e=this.props.songData;return Object.keys(e).map((function(t,n){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{scope:"row",children:t}),Object(f.jsx)("td",{className:"text-right",children:e[t].toFixed(3)})]},n)}))}},{key:"renderDataTable",value:function(){return this.props.songData?Object(f.jsxs)("div",{className:"info-div",children:[Object(f.jsx)("p",{className:"more-info text-muted m-0",children:"Detailed Info"}),Object(f.jsx)("div",{className:"table-data table-responsive-md",children:Object(f.jsx)("table",{className:"table table-striped",children:Object(f.jsx)("tbody",{children:this.renderData()})})})]}):null}},{key:"renderGraph",value:function(){var e=this.props.songData;if(!e)return null;var t={labels:["acousticness","danceability","energy","liveness","speechiness","valence"],datasets:[{label:"Analysis",data:[e.acousticness,e.danceability,e.energy,e.liveness,e.speechiness,e.valence],backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1.5}]};return Object(f.jsx)("div",{className:"graph",children:Object(f.jsx)(q.a,{data:t,options:{scale:{ticks:{beginAtZero:!0}}}})})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{className:"btn btn-success song-analysis",onClick:function(){return e.onClick()},children:"Get Song Analysis"}),this.renderGraph(),this.renderDataTable()]})}}]),n}(r.a.Component),Z=Object(i.b)((function(e){return{songData:e.selectedSongInfo.songData,selectedSong:e.selectedSongInfo.selectedSong}}),{fetchAnalysis:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(n,a){var r,s,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.spotifyToken,t.next=3,w.get("/".concat(e),{headers:{Authorization:"Bearer "+r}});case 3:s=t.sent,c={acousticness:s.data.acousticness,danceability:s.data.danceability,energy:s.data.energy,instrumentalness:s.data.instrumentalness,liveness:s.data.liveness,speechiness:s.data.speechiness,tempo:s.data.tempo,valence:s.data.valence},n({type:R,payload:c});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(W),K=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.selectedSong,t=null===e?"d-none":"";return e?Object(f.jsxs)("div",{className:"col-xl-3 col-lg-6 col-md-12 align-self-start mt-4 d-flex flex-column",children:[Object(f.jsx)("div",{className:"d-flex selected-song justify-content-center mt-2 ".concat(t),children:Object(f.jsx)("iframe",{title:"player",src:"https://open.spotify.com/embed/track/".concat(e.id),frameBorder:"0",width:"300",height:"380",allowtransparency:"true",allow:"encrypted-media"})}),"d-none"!==t&&Object(f.jsx)(Z,{})]}):null}}]),n}(r.a.Component),Q=Object(i.b)((function(e){return{selectedSong:e.selectedSongInfo.selectedSong}}),{})(K),$=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onClick=function(){e.props.createPlaylist()},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)("button",{className:"btn btn-success create-playlist",onClick:function(){return e.onClick()},children:"Save Playlist"})}}]),n}(r.a.Component),ee=Object(i.b)(null,{createPlaylist:function(){return function(){var e=Object(v.a)(y.a.mark((function e(t,n){var a,r,s,c,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.spotifyToken,r=n().auth.userData.id,s=n().search.searchTerm.search,"A playlist created by TuneSense",c={name:"".concat(s," songs"),description:"A playlist created by TuneSense",public:!0},e.prev=5,e.next=8,N.post("".concat(r,"/playlists"),c,{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}});case 8:i=e.sent,console.log(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}})($),te=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(M,{}),Object(f.jsxs)("div",{className:"container",children:[!this.props.search.songs.length>0&&Object(f.jsx)(V,{}),this.props.auth.isSignedIn&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(B,{}),Object(f.jsx)(ee,{})]}),Object(f.jsx)("div",{className:"row justify-content-center",children:this.props.search.songs&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Q,{}),Object(f.jsx)(X,{})]})})]})]})}}]),n}(r.a.Component),ne=Object(i.b)((function(e){return{auth:e.auth,search:e.search,selectedSong:e.selectedSong}}),{})(te),ae={isSignedIn:null,spotifyToken:null,userData:null},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(j.a)(Object(j.a)({},e),{},{isSignedIn:!0,spotifyToken:t.payload});case C:return Object(j.a)(Object(j.a)({},e),{},{isSignedIn:!1,spotifyToken:null,userData:null});case I:return Object(j.a)(Object(j.a)({},e),{},{userData:t.payload});default:return e}},se={songs:[],searchTerm:""},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(j.a)(Object(j.a)({},e),{},{searchTerm:t.payload});case D:return Object(j.a)(Object(j.a)({},e),{},{songs:t.payload});default:return e}},ie={selectedSong:null,songData:null},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(j.a)(Object(j.a)({},e),{},{selectedSong:t.payload,songData:null});case R:return Object(j.a)(Object(j.a)({},e),{},{songData:t.payload});default:return e}},le={playListInfo:{}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(j.a)(Object(j.a)({},e),{},{playListInfo:t.payload});default:return e}},de=Object(o.b)({auth:re,search:ce,selectedSongInfo:oe,createPlaylist:ue}),pe=(n(227),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c),be=Object(o.d)(de,pe(Object(o.a)(l.a)));c.a.render(Object(f.jsx)(i.a,{store:be,children:Object(f.jsx)(ne,{})}),document.getElementById("root"))}},[[228,1,2]]]);
//# sourceMappingURL=main.fb47aef9.chunk.js.map